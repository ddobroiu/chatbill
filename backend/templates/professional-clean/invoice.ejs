<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factură <%= invoice.invoiceNumber %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        @page {
            size: A4;
            margin: 24mm 16mm;
        }
        body {
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto" style="min-height: 100vh;">

        <!-- Header with gradient -->
        <div class="gradient-bg px-8 py-12 text-white">
            <div class="flex justify-between items-start">
                <div>
                    <% if (company.logo) { %>
                        <img src="<%= company.logo %>" alt="<%= company.name %>" class="h-10 mb-6 brightness-0 invert">
                    <% } else { %>
                        <div class="text-3xl font-bold mb-6"><%= company.name %></div>
                    <% } %>
                    <div class="text-white/80 space-y-1 text-sm">
                        <div><%= company.address %></div>
                        <div><%= company.city %>, <%= company.county %></div>
                        <% if (company.cui) { %><div>CUI: <%= company.cui %></div><% } %>
                    </div>
                </div>

                <div class="text-right">
                    <div class="text-sm text-white/70 uppercase tracking-wider mb-2">Factură</div>
                    <div class="text-3xl font-bold mb-4"><%= invoice.invoiceNumber %></div>
                    <% if (invoice.status) { %>
                        <div class="inline-block px-4 py-1 rounded-full text-xs font-semibold <%= invoice.status === 'paid' ? 'bg-green-400 text-green-900' : 'bg-yellow-400 text-yellow-900' %>">
                            <%= invoice.status === 'paid' ? 'PLĂTIT' : 'NEPLĂTIT' %>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="bg-white px-8 py-10">

            <!-- Invoice Details -->
            <div class="grid grid-cols-3 gap-6 mb-12">
                <div>
                    <div class="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">Data emiterii</div>
                    <div class="text-sm font-medium text-gray-900"><%= invoice.issueDate || new Date().toLocaleDateString('ro-RO') %></div>
                </div>
                <% if (invoice.dueDate) { %>
                <div>
                    <div class="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">Scadență</div>
                    <div class="text-sm font-medium text-gray-900"><%= invoice.dueDate %></div>
                </div>
                <% } %>
                <div>
                    <div class="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2">Total</div>
                    <div class="text-lg font-bold text-gray-900"><%= invoice.total.toFixed(2) %> RON</div>
                </div>
            </div>

            <!-- Client Info -->
            <div class="bg-gray-50 rounded-lg p-6 mb-12">
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wide mb-3">Facturat către</div>
                <div class="text-base font-semibold text-gray-900 mb-2">
                    <%= client.type === 'company' ? client.name : (client.firstName + ' ' + client.lastName) %>
                </div>
                <div class="text-sm text-gray-600 space-y-1">
                    <% if (client.cui) { %><div>CUI: <%= client.cui %></div><% } %>
                    <% if (client.cnp) { %><div>CNP: <%= client.cnp %></div><% } %>
                    <% if (client.address) { %><div><%= client.address %></div><% } %>
                    <% if (client.city) { %><div><%= client.city %><%= client.county ? ', ' + client.county : '' %></div><% } %>
                </div>
            </div>

            <!-- Products Table -->
            <div class="mb-12">
                <div class="text-sm font-semibold text-gray-900 mb-6 uppercase tracking-wide">Produse / Servicii</div>

                <div class="space-y-4">
                    <% products.forEach((product, index) => { %>
                    <div class="flex items-center justify-between py-4 border-b border-gray-100">
                        <div class="flex-1">
                            <div class="text-sm font-medium text-gray-900 mb-1"><%= product.name %></div>
                            <div class="text-xs text-gray-500">
                                <%= product.quantity %> <%= product.unit || 'buc' %> × <%= product.price.toFixed(2) %> RON
                                <% if (invoice.isVatPayer && product.vat > 0) { %>
                                    • TVA <%= product.vat %>%
                                <% } %>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-base font-semibold text-gray-900">
                                <%= ((product.quantity * product.price) * (1 + (product.vat || 0) / 100)).toFixed(2) %> RON
                            </div>
                        </div>
                    </div>
                    <% }) %>
                </div>
            </div>

            <!-- Totals -->
            <div class="flex justify-end">
                <div class="w-80 space-y-3">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Subtotal</span>
                        <span class="font-medium text-gray-900"><%= invoice.subtotal.toFixed(2) %> RON</span>
                    </div>

                    <% if (invoice.isVatPayer && invoice.totalVat > 0) { %>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">TVA</span>
                        <span class="font-medium text-gray-900"><%= invoice.totalVat.toFixed(2) %> RON</span>
                    </div>
                    <% } %>

                    <div class="border-t-2 border-gray-200 pt-3 mt-3">
                        <div class="flex justify-between">
                            <span class="text-base font-semibold text-gray-900">Total</span>
                            <span class="text-2xl font-bold text-gray-900"><%= invoice.total.toFixed(2) %> RON</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <div class="bg-gray-50 px-8 py-8">
            <div class="grid grid-cols-2 gap-8 text-xs text-gray-500">
                <div>
                    <div class="font-semibold text-gray-700 mb-2">Informații furnizor</div>
                    <div class="space-y-1">
                        <% if (company.cui) { %><div>CUI: <%= company.cui %></div><% } %>
                        <% if (company.regCom) { %><div>Reg. Com.: <%= company.regCom %></div><% } %>
                        <% if (company.email) { %><div><%= company.email %></div><% } %>
                        <% if (company.phone) { %><div><%= company.phone %></div><% } %>
                    </div>
                </div>

                <div>
                    <div class="font-semibold text-gray-700 mb-2">Detalii bancare</div>
                    <div class="space-y-1">
                        <% if (company.iban) { %><div>IBAN: <%= company.iban %></div><% } %>
                        <% if (company.bank) { %><div>Banca: <%= company.bank %></div><% } %>
                    </div>
                </div>
            </div>

            <div class="text-center text-xs text-gray-400 mt-8 pt-6 border-t border-gray-200">
                Vă mulțumim pentru colaborare!
            </div>
        </div>

    </div>
</body>
</html>
